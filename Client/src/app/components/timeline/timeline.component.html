@if (project) {
  <div class="p-4">
    <!-- Project Name -->
    <div class="mb-4">
      <h1 class="text-3xl font-light text-gray-800">Project: {{ project.name }}</h1>
    </div>

    <!-- Timeline Grid -->
    <div class="w-[3200px] overflow-x-auto overflow-y-auto max-h-[calc(100vh-120px)]">
      <div class="flex gap-[10px]">
        @for (month of monthColumns; track month.month + '-' + month.year) {
          <!-- Month Column -->
          <div
            class="flex-1 min-w-[400px] rounded-md text-center"
            style="background-color: #6AA6CE;"
          >
            <!-- Month Header -->
            <div class="text-gray-600 text-3xl py-2 sticky top-0 z-10 rounded-md" style="background-color: #6AA6CE;">{{ month.name }}</div>

            <!-- Sprints Container -->
            <div class="flex space-x-1 p-1 min-h-[1000px]">
              @for (sprintCol of month.sprints; track sprintCol.sprint.id) {
                <!-- Sprint Column -->
                <div
                  class="flex-1 p-1 text-center font-light rounded-md"
                  style="background-color: #E2E8F0;"
                >
                  <!-- Sprint Header -->
                  <div class="text-base font-light mb-2">
                    {{ sprintCol.sprint.name }} ({{ formatSprintDates(sprintCol.sprint) }})
                  </div>

                  <!-- Tasks -->
                  <div class="space-y-1">
                    @for (task of sprintCol.tasks; track task.id) {
                      <div
                        class="p-1 text-center font-light text-sm rounded-sm border border-gray-400"
                        [ngClass]="getTaskColor(task)"
                      >
                        <div class="text-sm font-medium">{{ task.name }}</div>
                        <div class="text-sm">{{ task.ownerName || 'Unassigned' }}</div>
                        <div class="text-sm">{{ formatTaskDates(task) }}</div>
                      </div>
                    }
                  </div>
                </div>
              }

              <!-- Empty sprint placeholders if no sprints in this month -->
              @if (month.sprints.length === 0) {
                <div
                  class="flex-1 p-1 text-center font-light rounded-md"
                  style="background-color: #E2E8F0;"
                >
                  <div class="text-base font-light text-gray-400 italic">No sprints</div>
                </div>
              }
            </div>
          </div>
        }

        @if (monthColumns.length === 0) {
          <div class="flex-1 p-8 text-center text-gray-500">
            <p class="text-xl">No timeline data available</p>
            <p class="mt-2">Upload an Excel file to import tasks</p>
          </div>
        }
      </div>
    </div>
  </div>
} @else {
  <div class="flex items-center justify-center h-[calc(100vh-64px)]">
    <div class="text-center text-gray-500">
      <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
      </svg>
      <p class="text-xl">Select a project to view the timeline</p>
      <p class="mt-2">Or create a new project to get started</p>
    </div>
  </div>
}
